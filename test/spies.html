<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Spy Unit Tests</title>
  <link rel="import" href="../node_modules/chai/chai.js">
  <link rel="import" href="../src/spies.html">
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <script>
    'use strict';

    var expect = chai.expect;

    describe('Spy', function() {
      describe('#spy', function() {
        describe('on function', function() {
          var S = {};

          beforeEach(function(done) {
            S.fn = function() { return 1; };
            done();
          });

          it('should verify single call on function with no arguments', function() {
            Spies.spy(S, 'fn');

            expect(S.fn()).to.equal(1);
            Spies.verify(S.fn)().to.have.length(1);
            Spies.verify(S.fn)(2).to.have.length(0);
          });  

          it('should reset when calling reset', function() {
            Spies.spy(S, 'fn');
            S.fn();

            Spies.reset(S.fn);
            expect(S.fn()).to.equal(1);
            Spies.verify(S.fn, 0)();
          });
        })
      });
    });
  </script>
</body>
</html>